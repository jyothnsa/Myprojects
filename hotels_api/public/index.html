<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="/styles.css" type="text/css">
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.2/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.21.1/babel.min.js"></script>
  </head>
  <body>
    <div id="finder">
      <div id="hotelsFinder">

      </div>
    </div>
  </body>
  <script type="text/babel">
    class Hotels extends React.Component{
      constructor(props){
        super(props);
        this.state = {
          hotels: [],
          title: "Where's The Food",
          hotelNames: ['Akkayapalem','Beachroad','CBM compound','Diamondpark','Dabagardens','Dondaparty','Gajuwaka','Harbour park road','Iskatotha','MVP','Siripuram','SriKanya','Seetammadhara','SagarNagar','VIP road','Waltair Uplands']
        };
        this.handleSubmit =this.handleSubmit.bind(this);
      }
handleSubmit(e){
  e.preventDefault(e);
  const location = this.refs.location.value;

  fetch('/api/hotels?location=' + location).then(function(data){

    return data.json();
  }).then(json => {
    this.setState({
      hotels: json
    });
  });
}
      render(){

          const hotelDetails = this.state.hotels.map(function(hotel, index){
          return(
            <li key={index}>
              <span className = {hotel.status}></span>
              <span className="name">{hotel.hotelName}</span>
              <span className="rating">{hotel.rating}</span>
            </li>
          );
        });
        const hotelNames = this.state.hotelNames.map(function(names,index){
          return(
                <option  key = {index} value = {names}> {names} </option>
          );
        });
        return(
          <div id="hotels-container">
          <h1> {this.state.title} </h1>
          <h2> Find restuarants nearby ur location along with ratings...! </h2>
                 <form id="search" onSubmit = {this.handleSubmit}>
              <select ref="location">
              <option defaultValue> Pick ur location </option>
                      {hotelNames}
                </select>
             <input type="submit" value="Find Now" />
             </form>
               <ul>{hotelDetails}</ul>
    </div>
        )
      }
    }
    ReactDOM.render(<Hotels />, document.getElementById('hotelsFinder'));
  </script>
</html>
